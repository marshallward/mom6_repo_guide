<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Marshall Ward">
  <title>MOM6 Repo Guide</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal.js/dist/reveal.css">
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="./reveal.js/css/theme/gfdl.css" id="theme">
  <!-- Explicitly add zenburn for highlight support -->
  <link rel="stylesheet" href="./reveal.js/plugin/highlight/zenburn.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? './reveal.js/css/print/pdf.scss' : './reveal.js/css/print/paper.scss';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="./reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
  <base href="./index.html">
</head>
<body>
  <div class="reveal"
       style="background: url(img/bg_gfdl.jpg);
              background-size: cover;">

    <!-- Original ratio: 10.04" x 7.08" -->
    <div style="height: 100vh; position: absolute; bottom: -50vh; left: -40vh">
      <!--
      <img style="height: 100vh; width: 142vh" src="img/bg_globe.png">
      -->
    </div>

    <header style="width: 10vh; position: absolute; bottom: 2vh; right: 2vh;">
      <img src="img/noaa_logo.png">
    </header>

    <footer style="font-size: 1pc; position: absolute; bottom: 2%; left: 2%;">
      <code><p><a href="https://marshallward.org/repo_guide.html">https://marshallward.org/repo_guide.html</a></p></code>
    </footer>

    <div class="slides">

<section id="title-slide">
  <!--div class="reveal" style="text-align: right;">
    <img src="img/noaa_logo.png"
         style="background: none; border: none; box-shadow: none;
         width: 30%"
         alt="NCI">
  </div-->
  <h1 class="title">MOM6 Repo Guide</h1>
  <p class="author" style="text-align: right;">Marshall Ward</p>
  <p class="date" style="text-align: right;">2022-13-05</p>
  <!-- Currently cannot add notes to a title slide, so have to do manually-->
  <aside class="notes">
    <p>Introductory comments, written to slide notes</p>
  </aside>
</section>

<section id="repository-space" class="title-slide slide level1">
<h1>Repository Space</h1>
<p><img data-src="img/consortium.svg" class="float float" style="width:50.0%" alt="image" /></p>
<dl>
<dt>Inner radius</dt>
<dd><p>History-preserving</p>
</dd>
<dt>Outer radius</dt>
<dd><p>Nonhistoric "Drafts"</p>
</dd>
</dl>
<p>Nodes (eventually) share a common history via MOM-ocean hub</p>
</section>

<section id="history-preservation" class="title-slide slide level1">
<h1>History preservation</h1>
<ul>
<li><p>Who should preserve history?</p>
<ul>
<li>Production runs with defined source</li>
<li>Anyone <em>sharing code</em> with production source
<ul>
<li>i.e. Group "main" branches ("<code>dev/XXX</code>")</li>
</ul></li>
</ul></li>
<li><p>Who can rewrite history?</p>
<ul>
<li>Individual PRs</li>
<li>External contributions</li>
</ul></li>
</ul>
</section>

<section id="why-curate" class="title-slide slide level1">
<h1>Why curate?</h1>
<ul>
<li><p>Ensure every commit will run and pass tests</p></li>
<li><p><code>git bisect</code> debugging</p>
<ul>
<li>Broken commits break bisection</li>
</ul></li>
<li><p>Well-documented development history</p>
<ul>
<li>Code is "how", commits are "why"</li>
<li>Efficient code review</li>
<li>Improves automated reporting</li>
</ul></li>
</ul>
</section>

<section id="commits-in-linux" class="title-slide slide level1">
<h1>Commits in Linux</h1>
<blockquote>
<p>Commit messages to me are almost as important as the code change itself.</p>
<p>If you can explain the code change to me, I will trust the code.</p>
</blockquote>
<p>Linus Torvalds, Linux OSS 2020</p>
<aside class="notes">
<p><a href="https://www.youtube.com/watch?v=H8Gd9t7FQqI">https://www.youtube.com/watch?v=H8Gd9t7FQqI</a></p>
</aside>
</section>

<section id="curated-example" class="title-slide slide level1">
<h1>Curated Example</h1>
<pre class="txt" data-code="txt

"><code>commit 53d5fc89d66a778577295020dc57bb3ccec84354
Merge: f5b667ded075 172da89ed0ea
Author: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
Date:   Fri Oct 1 14:45:23 2021 -0700

    Merge tag &#39;s390-5.15-4&#39; of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux
    
    Pull s390 fix from Vasily Gorbik:
     &quot;One fix for 5.15-rc4: Avoid CIO excessive path-verification requests,
      which might cause unwanted delays&quot;
    
    * tag &#39;s390-5.15-4&#39; of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux:
      s390/cio: avoid excessive path-verification requests

commit f5b667ded07569dd6e33885cffd35fd519cfc942
Author: Rafael J. Wysocki &lt;rafael@kernel.org&gt;
Date:   Fri Oct 1 19:14:28 2021 +0200

    thermal: Update information in MAINTAINERS
    
    Because Rui is now going to focus on work that is not related to the
    maintenance of the thermal subsystem in the kernel, Rafael will start
    to help Daniel with handling the development process as a new member
    of the thermal maintainers team.  Rui will continue to review patches
    in that area.
    
    The thermal development process flow will change so that the material
    from the thermal git tree will be merged into the thermal branch of
    the linux-pm.git tree before going into the mainline.
    
    Update the information in MAINTAINERS accordingly.
    
    Signed-off-by: Rafael J. Wysocki &lt;rafael@kernel.org&gt;
    Acked-by: Zhang Rui &lt;rui.zhang@intel.com&gt;
    Acked-by: Daniel Lezcano &lt;daniel.lezcano@linaro.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

commit b2626f1e3245ddd810b69df86514774d6cb655ee
Merge: 24f67d82c43c 7b0035eaa7da
Author: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
Date:   Fri Oct 1 11:08:07 2021 -0700

    Merge tag &#39;for-linus&#39; of git://git.kernel.org/pub/scm/virt/kvm/kvm
    
    Pull more kvm fixes from Paolo Bonzini:
     &quot;Small x86 fixes&quot;
    
    * tag &#39;for-linus&#39; of git://git.kernel.org/pub/scm/virt/kvm/kvm:
      KVM: selftests: Ensure all migrations are performed when test is affined
      KVM: x86: Swap order of CPUID entry &quot;index&quot; vs. &quot;significant flag&quot; checks
      ptp: Fix ptp_kvm_getcrosststamp issue for x86 ptp_kvm
      x86/kvmclock: Move this_cpu_pvti into kvmclock.h
      selftests: KVM: Don&#39;t clobber XMM register when read
      KVM: VMX: Fix a TSX_CTRL_CPUID_CLEAR field mask issue

commit 7b0035eaa7dab9fd33d6658ad6a755024bdce26c
Author: Sean Christopherson &lt;seanjc@google.com&gt;
Date:   Wed Sep 29 16:41:12 2021 -0700

    KVM: selftests: Ensure all migrations are performed when test is affined
    
    Rework the CPU selection in the migration worker to ensure the specified
    number of migrations are performed when the test iteslf is affined to a
    subset of CPUs.  The existing logic skips iterations if the target CPU is
    not in the original set of possible CPUs, which causes the test to fail
    if too many iterations are skipped.
    
      ==== Test Assertion Failure ====
      rseq_test.c:228: i &gt; (NR_TASK_MIGRATIONS / 2)
      pid=10127 tid=10127 errno=4 - Interrupted system call
         1  0x00000000004018e5: main at rseq_test.c:227
         2  0x00007fcc8fc66bf6: ?? ??:0
         3  0x0000000000401959: _start at ??:?
      Only performed 4 KVM_RUNs, task stalled too much?
    
    Calculate the min/max possible CPUs as a cheap &quot;best effort&quot; to avoid
    high runtimes when the test is affined to a small percentage of CPUs.
    Alternatively, a list or xarray of the possible CPUs could be used, but
    even in a horrendously inefficient setup, such optimizations are not
    needed because the runtime is completely dominated by the cost of
    migrating the task, and the absolute runtime is well under a minute in
    even truly absurd setups, e.g. running on a subset of vCPUs in a VM that
    is heavily overcommited (16 vCPUs per pCPU).
    
    Fixes: 61e52f1630f5 (&quot;KVM: selftests: Add a test for KVM_RUN+rseq to detect task migration bugs&quot;)
    Reported-by: Dongli Zhang &lt;dongli.zhang@oracle.com&gt;
    Signed-off-by: Sean Christopherson &lt;seanjc@google.com&gt;
    Message-Id: &lt;20210929234112.1862848-1-seanjc@google.com&gt;
    Signed-off-by: Paolo Bonzini &lt;pbonzini@redhat.com&gt;

commit e8a747d0884e554a8c1872da6c8f680a4f893c6d
Author: Sean Christopherson &lt;seanjc@google.com&gt;
Date:   Wed Sep 29 15:24:25 2021 -0700

    KVM: x86: Swap order of CPUID entry &quot;index&quot; vs. &quot;significant flag&quot; checks
    
    Check whether a CPUID entry&#39;s index is significant before checking for a
    matching index to hack-a-fix an undefined behavior bug due to consuming
    uninitialized data.  RESET/INIT emulation uses kvm_cpuid() to retrieve
    CPUID.0x1, which does _not_ have a significant index, and fails to
    initialize the dummy variable that doubles as EBX/ECX/EDX output _and_
    ECX, a.k.a. index, input.
    
    Practically speaking, it&#39;s _extremely_  unlikely any compiler will yield
    code that causes problems, as the compiler would need to inline the
    kvm_cpuid() call to detect the uninitialized data, and intentionally hose
    the kernel, e.g. insert ud2, instead of simply ignoring the result of
    the index comparison.
    
    Although the sketchy &quot;dummy&quot; pattern was introduced in SVM by commit
    66f7b72e1171 (&quot;KVM: x86: Make register state after reset conform to
    specification&quot;), it wasn&#39;t actually broken until commit 7ff6c0350315
    (&quot;KVM: x86: Remove stateful CPUID handling&quot;) arbitrarily swapped the
    order of operations such that &quot;index&quot; was checked before the significant
    flag.
    
    Avoid consuming uninitialized data by reverting to checking the flag
    before the index purely so that the fix can be easily backported; the
    offending RESET/INIT code has been refactored, moved, and consolidated
    from vendor code to common x86 since the bug was introduced.  A future
    patch will directly address the bad RESET/INIT behavior.
    
    The undefined behavior was detected by syzbot + KernelMemorySanitizer.
    
      BUG: KMSAN: uninit-value in cpuid_entry2_find arch/x86/kvm/cpuid.c:68
      BUG: KMSAN: uninit-value in kvm_find_cpuid_entry arch/x86/kvm/cpuid.c:1103
      BUG: KMSAN: uninit-value in kvm_cpuid+0x456/0x28f0 arch/x86/kvm/cpuid.c:1183
       cpuid_entry2_find arch/x86/kvm/cpuid.c:68 [inline]
       kvm_find_cpuid_entry arch/x86/kvm/cpuid.c:1103 [inline]
       kvm_cpuid+0x456/0x28f0 arch/x86/kvm/cpuid.c:1183
       kvm_vcpu_reset+0x13fb/0x1c20 arch/x86/kvm/x86.c:10885
       kvm_apic_accept_events+0x58f/0x8c0 arch/x86/kvm/lapic.c:2923
       vcpu_enter_guest+0xfd2/0x6d80 arch/x86/kvm/x86.c:9534
       vcpu_run+0x7f5/0x18d0 arch/x86/kvm/x86.c:9788
       kvm_arch_vcpu_ioctl_run+0x245b/0x2d10 arch/x86/kvm/x86.c:10020
    
      Local variable ----dummy@kvm_vcpu_reset created at:
       kvm_vcpu_reset+0x1fb/0x1c20 arch/x86/kvm/x86.c:10812
       kvm_apic_accept_events+0x58f/0x8c0 arch/x86/kvm/lapic.c:2923
    
    Reported-by: syzbot+f3985126b746b3d59c9d@syzkaller.appspotmail.com
    Reported-by: Alexander Potapenko &lt;glider@google.com&gt;
    Fixes: 2a24be79b6b7 (&quot;KVM: VMX: Set EDX at INIT with CPUID.0x1, Family-Model-Stepping&quot;)
    Fixes: 7ff6c0350315 (&quot;KVM: x86: Remove stateful CPUID handling&quot;)
    Cc: stable@vger.kernel.org
    Signed-off-by: Sean Christopherson &lt;seanjc@google.com&gt;
    Reviewed-by: Jim Mattson &lt;jmattson@google.com&gt;
    Message-Id: &lt;20210929222426.1855730-2-seanjc@google.com&gt;
    Signed-off-by: Paolo Bonzini &lt;pbonzini@redhat.com&gt;

commit 773e89ab0056aaa2baa1ffd9f044551654410104
Author: Zelin Deng &lt;zelin.deng@linux.alibaba.com&gt;
Date:   Wed Sep 29 13:13:49 2021 +0800

    ptp: Fix ptp_kvm_getcrosststamp issue for x86 ptp_kvm
    
    hv_clock is preallocated to have only HVC_BOOT_ARRAY_SIZE (64) elements;
    if the PTP_SYS_OFFSET_PRECISE ioctl is executed on vCPUs whose index is
    64 of higher, retrieving the struct pvclock_vcpu_time_info pointer with
    &quot;src = &amp;hv_clock[cpu].pvti&quot; will result in an out-of-bounds access and
    a wild pointer.  Change it to &quot;this_cpu_pvti()&quot; which is guaranteed to
    be valid.
    
    Fixes: 95a3d4454bb1 (&quot;Switch kvmclock data to a PER_CPU variable&quot;)
    Signed-off-by: Zelin Deng &lt;zelin.deng@linux.alibaba.com&gt;
    Cc: &lt;stable@vger.kernel.org&gt;
    Message-Id: &lt;1632892429-101194-3-git-send-email-zelin.deng@linux.alibaba.com&gt;
    Signed-off-by: Paolo Bonzini &lt;pbonzini@redhat.com&gt;

commit ad9af930680bb396c87582edc172b3a7cf2a3fbf
Author: Zelin Deng &lt;zelin.deng@linux.alibaba.com&gt;
Date:   Wed Sep 29 13:13:48 2021 +0800

    x86/kvmclock: Move this_cpu_pvti into kvmclock.h
    
    There&#39;re other modules might use hv_clock_per_cpu variable like ptp_kvm,
    so move it into kvmclock.h and export the symbol to make it visiable to
    other modules.
    
    Signed-off-by: Zelin Deng &lt;zelin.deng@linux.alibaba.com&gt;
    Cc: &lt;stable@vger.kernel.org&gt;
    Message-Id: &lt;1632892429-101194-2-git-send-email-zelin.deng@linux.alibaba.com&gt;
    Signed-off-by: Paolo Bonzini &lt;pbonzini@redhat.com&gt;

commit e02c16b9cd24925ea627f007df9ca9ee00eaaa62
Author: Oliver Upton &lt;oupton@google.com&gt;
Date:   Mon Sep 27 22:36:21 2021 +0000

    selftests: KVM: Don&#39;t clobber XMM register when read
    
    There is no need to clobber a register that is only being read from.
    Oops. Drop the XMM register from the clobbers list.
    
    Signed-off-by: Oliver Upton &lt;oupton@google.com&gt;
    Message-Id: &lt;20210927223621.50178-1-oupton@google.com&gt;
    Signed-off-by: Paolo Bonzini &lt;pbonzini@redhat.com&gt;

commit 5c49d1850ddd3240d20dc40b01f593e35a184f38
Author: Zhenzhong Duan &lt;zhenzhong.duan@intel.com&gt;
Date:   Sun Sep 26 09:55:45 2021 +0800

    KVM: VMX: Fix a TSX_CTRL_CPUID_CLEAR field mask issue
    
    When updating the host&#39;s mask for its MSR_IA32_TSX_CTRL user return entry,
    clear the mask in the found uret MSR instead of vmx-&gt;guest_uret_msrs[i].
    Modifying guest_uret_msrs directly is completely broken as &#39;i&#39; does not
    point at the MSR_IA32_TSX_CTRL entry.  In fact, it&#39;s guaranteed to be an
    out-of-bounds accesses as is always set to kvm_nr_uret_msrs in a prior
    loop. By sheer dumb luck, the fallout is limited to &quot;only&quot; failing to
    preserve the host&#39;s TSX_CTRL_CPUID_CLEAR.  The out-of-bounds access is
    benign as it&#39;s guaranteed to clear a bit in a guest MSR value, which are
    always zero at vCPU creation on both x86-64 and i386.
    
    Cc: stable@vger.kernel.org
    Fixes: 8ea8b8d6f869 (&quot;KVM: VMX: Use common x86&#39;s uret MSR list as the one true list&quot;)
    Signed-off-by: Zhenzhong Duan &lt;zhenzhong.duan@intel.com&gt;
    Reviewed-by: Sean Christopherson &lt;seanjc@google.com&gt;
    Message-Id: &lt;20210926015545.281083-1-zhenzhong.duan@intel.com&gt;
    Signed-off-by: Paolo Bonzini &lt;pbonzini@redhat.com&gt;

commit 172da89ed0eaf9d9348f5decb86ad04c624b39d1
Author: Vineeth Vijayan &lt;vneethv@linux.ibm.com&gt;
Date:   Fri Sep 10 13:45:24 2021 +0200

    s390/cio: avoid excessive path-verification requests
    
    Currently when removing a device from cio_ignore list, we trigger a
    path-verification for all the subchannels available in the system. This
    could lead to path-verification requests on subchannels with an online
    device, which could cause unwanted delay. Instead of all the
    subchannels, trigger the path-verifications to those without an online
    device.
    
    Reported-by: Julian Wiedmann &lt;jwi@linux.ibm.com&gt;
    Fixes: 2297791c92d0 (&quot;s390/cio: dont unregister subchannel from child-drivers&quot;)
    Signed-off-by: Vineeth Vijayan &lt;vneethv@linux.ibm.com&gt;
    Reviewed-by: Peter Oberparleiter &lt;oberpar@linux.ibm.com&gt;
    Signed-off-by: Heiko Carstens &lt;hca@linux.ibm.com&gt;
</code></pre>
</section>

<section id="curated-subjects" class="title-slide slide level1">
<h1>Curated Subjects</h1>
<pre class="txt" data-code="txt

"><code>53d5fc89d66a Merge tag &#39;s390-5.15-4&#39; of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux
f5b667ded075 thermal: Update information in MAINTAINERS
b2626f1e3245 Merge tag &#39;for-linus&#39; of git://git.kernel.org/pub/scm/virt/kvm/kvm
24f67d82c43c Merge tag &#39;drm-fixes-2021-10-01&#39; of git://anongit.freedesktop.org/drm/drm
78ea81417944 Merge tag &#39;exynos-drm-fixes-for-v5.15-rc4&#39; of git://git.kernel.org/pub/scm/linux/kernel/git/daeinki/drm-exynos into drm-fixes
3ff43f9df8b0 Merge tag &#39;amd-drm-fixes-5.15-2021-09-29&#39; of https://gitlab.freedesktop.org/agd5f/linux into drm-fixes
abb7700d4631 Merge tag &#39;drm-intel-fixes-2021-09-30&#39; of git://anongit.freedesktop.org/drm/drm-intel into drm-fixes
7b0035eaa7da KVM: selftests: Ensure all migrations are performed when test is affined
e8a747d0884e KVM: x86: Swap order of CPUID entry &quot;index&quot; vs. &quot;significant flag&quot; checks
773e89ab0056 ptp: Fix ptp_kvm_getcrosststamp issue for x86 ptp_kvm
ad9af930680b x86/kvmclock: Move this_cpu_pvti into kvmclock.h
26db706a6d77 drm/amdgpu: force exit gfxoff on sdma resume for rmb s0ix
98122e63a7ec drm/amdgpu: check tiling flags when creating FB on GFX8-
d942856865c7 drm/amd/display: Pass PCI deviceid into DC
467a51b69d08 drm/amd/display: initialize backlight_ramping_override to false
9f52c25f59b5 drm/amdgpu: correct initial cp_hqd_quantum for gfx9
083fa05bbaf6 drm/amd/display: Fix Display Flicker on embedded panels
66805763a97f drm/amdgpu: fix gart.bo pin_count leak
e02c16b9cd24 selftests: KVM: Don&#39;t clobber XMM register when read
05812b971c6d Merge tag &#39;drm/tegra/for-5.15-rc3&#39; of ssh://git.freedesktop.org/git/tegra/linux into drm-fixes
5c49d1850ddd KVM: VMX: Fix a TSX_CTRL_CPUID_CLEAR field mask issue
172da89ed0ea s390/cio: avoid excessive path-verification requests
4b8bcaf8a6d6 drm/i915: Remove warning from the rps worker
c83ff0186401 drm/i915/request: fix early tracepoints
da0468a74450 drm/i915/guc, docs: Fix pdfdocs build error by removing nested grid
5cb8742774d2 Merge tag &#39;gvt-fixes-2021-09-18&#39; of https://github.com/intel/gvt-linux into drm-intel-fixes
c3dbfb9c49ee gpu: host1x: Plug potential memory leak
a81cf839a064 gpu/host1x: fence: Make spinlock static
8a44924e1400 drm/tegra: uapi: Fix wrong mapping end address in case of disabled IOMMU
71eabafac1eb drm/tegra: dc: Remove unused variables
17ac76e050c5 drm/exynos: Make use of the helper function devm_platform_ioremap_resource()
d168cd797982 drm/i915/gvt: fix the usage of ww lock in gvt scheduler.
</code></pre>
</section>

<section id="commits-as-email" class="title-slide slide level1">
<h1>Commits as email</h1>
<ul>
<li><p>Pre-git commits were <em>emails</em> sent to maintainers</p>
<ul>
<li>The patch was the commit</li>
<li>The log was the email (subject + body)</li>
</ul></li>
<li><p>Emails follow a standard format (RFC 5822)</p>
<ul>
<li>"Lines â€¦ SHOULD be limited to 78 characters"</li>
<li>Subject reduced to ~50, leave space for hash</li>
</ul></li>
</ul>
<p>The closer you follow these rules, the better the results</p>
</section>

<section id="commit-example" class="title-slide slide level1">
<h1>Commit Example</h1>
<p><a href="https://github.com/NOAA-GFDL/MOM6/commit/0e8acd90b46656ccb7fbc73bc5911ef2733a345c"><img data-src="img/bob_commit.png" alt="image" /></a></p>
</section>

<section id="gfdl-dev-cycle" class="title-slide slide level1">
<h1>GFDL dev cycle</h1>
<ol type="1">
<li><p>Create a branch from mainline</p>
<pre class=""><code>$ git checkout dev/gfdl
$ git pull
$ git checkout -b new_feature</code></pre></li>
<li><p>Do actual work</p></li>
<li><p>Commit changes</p>
<pre class=""><code>$ git status      # verify changes
$ git add ...     # avoid `-a` unless certain
$ git commit      # Long-form, no `-m`</code></pre></li>
<li><p>Repeat and add commits as needed</p></li>
</ol>
</section>

<section id="submitting-prs" class="title-slide slide level1">
<h1>Submitting PRs</h1>
<ol type="1">
<li><p>Fetch latest mainline branch:</p>
<pre><code>$ git fetch origin dev/gfdl</code></pre></li>
<li><p>Clean up commits with rebase:</p>
<pre><code>$ git checkout new_feature # If not already there
$ git rebase -i dev/gfdl   # Opens an interactive session</code></pre></li>
<li><p>Push to your GitHub account, submit PR:</p>
<pre><code>$ git push marshall new_feature</code></pre></li>
</ol>
</section>

<section id="rebase-example" class="title-slide slide level1">
<h1>Rebase example</h1>
<pre class="txt" data-code="txt

"><code>pick 3a20074 Draft for in-place repeated groups
pick 6d3e1e7 Bugfix: Replace &#39;lstrip&#39; with slice
pick fd3a4cf Key-based cogroup tracking
pick 76726a7 Cogroup class
pick 9b647d6 Object-like refactor of Cogroup
pick e6592f3 del support; fixed super() errors
pick 5f116ac Stronger del support; OrderedDict parent class
pick 0509dc3 Prevent Cogroup lists for Namelist(nml)
pick 80f381f Override Namelist get() to handle cogroups
pick 6e9483a Cogroup set to dict; all cogroups use internal key
pick 68966d1 NmlKey class for namelist keys

# Rebase 37bcdb0..68966d1 onto 37bcdb0 (11 commands)
#
# Commands:
# p, pick &lt;commit&gt; = use commit
# r, reword &lt;commit&gt; = use commit, but edit the commit message
# e, edit &lt;commit&gt; = use commit, but stop for amending
# s, squash &lt;commit&gt; = use commit, but meld into previous commit
# f, fixup [-C | -c] &lt;commit&gt; = like &quot;squash&quot; but keep only the previous
#                    commit&#39;s log message, unless -C is used, in which case
#                    keep only this commit&#39;s message; -c is same as -C but
#                    opens the editor
# x, exec &lt;command&gt; = run command (the rest of the line) using shell
# b, break = stop here (continue rebase later with &#39;git rebase --continue&#39;)
# d, drop &lt;commit&gt; = remove commit
# l, label &lt;label&gt; = label current HEAD with a name
# t, reset &lt;label&gt; = reset HEAD to a label
# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]
# .       create a merge commit using the original merge commit&#39;s
# .       message (or the oneline, if no original merge commit was
# .       specified); use -c &lt;commit&gt; to reword the commit message
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
</code></pre>
</section>

<section id="submit-pr-to-branch" class="title-slide slide level1">
<h1>Submit PR to branch</h1>
<p><img data-src="img/merge_style.png" alt="image" /></p>
<p><a href="https://stackoverflow.com/a/52157972/317172">Link to merge types</a></p>
</section>

<section id="ff-vs-no-ff" class="title-slide slide level1">
<h1>FF vs no-FF</h1>
<p><img data-src="img/git_ff.png" class="float float" style="width:40.0%" alt="image" /></p>
<p>Linear history merge</p>
<pre class=""><code>git merge new_feature dev/gfdl</code></pre>
<p>Branch-preserving merge</p>
<pre class=""><code>git merge --no-ff new_feature dev/gfdl</code></pre>
<p>GitHub is branch-preserving; use CLI for FF merge</p>
</section>

<section id="pr-example" class="title-slide slide level1">
<h1>PR example</h1>
<p><a href="https://github.com/NOAA-GFDL/MOM6/pull/118"><img data-src="img/bob_pr.png" alt="image" /></a></p>
</section>

<section id="submission-checklist" class="title-slide slide level1">
<h1>Submission Checklist</h1>
<p>TODO</p>
<ol type="1">
<li>Has it passed testing?</li>
<li>Are all commits relevant?</li>
<li>...?</li>
</ol>
</section>

<section id="submit-pr-for-main" class="title-slide slide level1">
<h1>Submit PR for main</h1>
<ol start="0" type="1">
<li>Backup branch? Update main?</li>
<li>Create a candidate branch
<ul>
<li><code>dev-gfdl-main-candidate-YYYYMMDD</code></li>
<li>Allow <code>dev/gfdl</code> to continue during review</li>
</ul></li>
<li>Submit PR from <code>dev/gfdl</code> to <code>mom-ocean:main</code></li>
<li>If 5x approval, <em>merge</em> PR to <code>main</code>
<ul>
<li>As I learned, never rebase or squash!</li>
</ul></li>
<li>All groups merge <code>main</code> to their branches</li>
</ol>
</section>

<section id="discussion" class="title-slide slide level1">
<h1>Discussion</h1>
<p>TODO</p>
<ol type="1">
<li>What is the update frequency?
<ul>
<li>How often can we handle testing?</li>
</ul></li>
<li>How aggressive to enforce commit logs?</li>
<li>...?</li>
</ol>
</section>
    </div>
  </div>

  <script src="./reveal.js/dist/reveal.js"></script>
  <script src="./reveal.js/plugin/math/math.js"></script>
  <script src="./reveal.js/plugin/notes/notes.js"></script>
  <script src="./reveal.js/plugin/highlight/highlight.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          //TeX: {
          //  inlineMath: [['\\(','\\)']],
          //  displayMath: [['\\[','\\]']],
          //  balanceBraces: true,
          //  processEscapes: false,
          //  processRefs: true,
          //  processEnvironments: true,
          //  preview: 'TeX',
          //  skipTags: ['script','noscript','style','textarea','pre','code'],
          //  ignoreClass: 'tex2jax_ignore',
          //  processClass: 'tex2jax_process'
          //},
        },

        // Optional reveal.js plugins
        dependencies: [
          { src: './reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: './reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: './reveal.js/plugin/notes/notes.js', async: true }
        ],
        plugins : [ RevealMath, RevealNotes, RevealHighlight],
      });
    </script>
    </body>
</html>
